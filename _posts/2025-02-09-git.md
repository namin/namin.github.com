---
layout: post
title: git contribution guidelines and cheatsheet
---

I'll use the example of the work-in-progress Github repo [namin/holey](https://github.com/namin/holey).

## Fetching repos and branches

Typically clone a read-only repo with HTTPs and a read/write repo with SSH.
If you're working with someone's else repo, you can do do:
```
git clone --recursive https://github.com/namin/holey.git
```
Then from `cd holey`, and assuming you have your own fork under _`YOUR_USERNAME`_:
```
git remote add my git@github.com:YOUR_USERNAME/holey.git
```
Then, to get all the branches from all the repos, do
```
git fetch --all
```
You can update (fetch and merge) the current branch with:
```
git pull
```

## Making changes
Checkout a branch, e.g.:
```
git checkout main
```
To create a new branch use `-b`, say _`YOUR_BRANCH`_:
```
git checkout -b YOUR_BRANCH
```
Do your changes by adding files or directories one by one, and committing:
```
git add YOUR_FILE
...
git commit -m 'log msg for my changes'
```
Use `-a` to auto-include all changes to already existing files.
Use a `.gitignore` file in the root with patterns of file names to always ignore.
Use `git add -p` to interactively select what to add.
Use `git stash` to reset your state, and `git stash apply` to restore the last stashed state.

## Pushing

Then, to push to your repo do:
```
git push -u my YOUR_BRANCH
```

## Recursive submodules

We used the flag `--recursive` with `git clone` because the repo has submodules, in particular in the directory `benchmarks`.
If you forget to use the `--recursive` flag, you can equivalently do:
```
git submodule init
git submodule update
```
You can go to a submodule directory, like `cd benchmarks/PythonProgrammingPuzzles`, and make changes as usual.
Be sure to commit your changes to the repo specified in the gitsubmdule, and then when you go back to the main repo, you can commit the new commit to the submodule just as another file (so `git commit -a` works). Note that the subodule hard codes the exact commit to use, and not the overall branch where the git submodule is at. You can run `git submodule update` to update the submodule to the current hard-coded commit.

## Commands to avoid

Avoid using `git add .` unless you have carefully curated the `.gitignore`. In particular, generated artifact like `__pycache__` directories should not be committed.
